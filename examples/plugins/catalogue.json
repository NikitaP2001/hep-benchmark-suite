[
  {
    "name": "cpu-frequency",
    "description": "Retrieves the current frequency of the first CPU.",
    "command": "cpupower frequency-info -f",
    "regex": "current CPU frequency: (?P<value>\\d+).*",
    "unit": "kHz",
    "example-output": "analyzing CPU 0:\n  current CPU frequency: 1380559 (asserted by call to kernel)",
    "expected-value": 1380559
  },
  {
    "name": "load",
    "description": "Retrieves the one minute system load average. Note that load of 1 on a 4-CPU system means that it was idle 75% of the time.",
    "command": "uptime",
    "regex": "load average: (?P<value>\\d+.\\d+),",
    "unit": "",
    "aggregation": "",
    "example-output": " 11:02:47 up  3:03,  1 user,  load average: 0.18, 0.38, 0.25",
    "expected-value": 0.18
  },
  {
    "name": "power-consumption",
    "description": "Retrieves input power consumption of the system. The command takes a long time to execute (it can take half a minute). Use one of the alternatives if possible. Requires elevated privileges.",
    "command": "ipmitool sdr elist",
    "regex": "PS\\d Power In.* (?P<value>\\d+) Watts",
    "unit": "W",
    "aggregation": "sum",
    "example-output": "Pwr Unit Status  | 01h | ok  | 21.1 | \nPwr Unit Redund  | 02h | ok  | 21.1 | Fully Redundant\nIPMI Watchdog    | 03h | ok  |  7.1 | \nPhysical Scrty   | 04h | ok  | 23.1 | \nSMI Timeout      | 06h | ok  |  7.1 | \nSystem Event Log | 07h | ok  |  7.1 | \nSystem Event     | 08h | ok  |  7.1 | \nButton           | 09h | ok  | 12.1 | \nBMC Watchdog     | 0Ah | ok  | 46.1 | \nVR Watchdog      | 0Bh | ok  |  7.1 | \nSSB Therm Trip   | 0Dh | ok  |  7.1 | \nBMC FW Health    | 10h | ok  | 46.1 | \nSystem Airflow   | 11h | ok  | 23.1 | 12 CFM\nBB CPU2 VR Temp  | 14h | ok  |  7.1 | 31 degrees C\nBB Inlet Temp    | 20h | ok  |  7.1 | 29 degrees C\nHSBP Temp        | 21h | ok  | 15.1 | 25 degrees C\nSSB Temp         | 22h | ok  |  7.1 | 46 degrees C\nBB BMC Temp      | 23h | ok  |  7.1 | 41 degrees C\nBB CPU1 VR Temp  | 24h | ok  |  7.1 | 37 degrees C\nBB REAR Temp     | 25h | ok  |  7.1 | 37 degrees C\nHSBP PSOC Temp   | 29h | ok  | 15.1 | 32 degrees C\nExit Air Temp    | 2Eh | ok  |  7.1 | 37 degrees C\nLAN NIC Temp     | 2Fh | ok  |  7.1 | 53 degrees C\nSys Fan 1A       | 30h | ok  | 29.1 | 9768 RPM\nSys Fan 1B       | 31h | ok  | 29.2 | 10080 RPM\nSys Fan 2A       | 32h | ok  | 29.3 | 9416 RPM\nSys Fan 2B       | 33h | ok  | 29.4 | 10080 RPM\nSys Fan 3A       | 34h | ok  | 29.5 | 9416 RPM\nSys Fan 3B       | 35h | ok  | 29.6 | 9920 RPM\nPS1 Status       | 50h | ok  | 10.1 | Presence detected\nPS2 Status       | 51h | ok  | 10.2 | Presence detected\nPS1 Power In     | 54h | ok  | 10.1 | 210 Watts\nPS2 Power In     | 55h | ok  | 10.2 | 200 Watts\nPS1 Curr Out %   | 58h | ok  | 10.1 | 12 percent\nPS2 Curr Out %   | 59h | ok  | 10.2 | 11 percent\nPS1 Temperature  | 5Ch | ok  | 10.1 | 31 degrees C\nPS2 Temperature  | 5Dh | ok  | 10.2 | 30 degrees C\nP1 Status        | 70h | ok  |  3.1 | Presence detected\nP2 Status        | 71h | ok  |  3.2 | Presence detected\nP1 Therm Margin  | 74h | ok  |  3.1 | -49 degrees C\nP2 Therm Margin  | 75h | ok  |  3.2 | -51 degrees C\nP1 Therm Ctrl %  | 78h | ok  |  3.1 | 0 percent\nP2 Therm Ctrl %  | 79h | ok  |  3.2 | 0 percent\nCPU ERR2         | 7Ch | ok  |  3.1 | \nIERR             | 80h | ok  |  3.1 | \nCPU Missing      | 82h | ok  |  3.1 | \nP1 DTS Therm Mgn | 83h | ok  |  3.1 | -39 degrees C\nP2 DTS Therm Mgn | 84h | ok  |  3.2 | -41 degrees C\nVRD Hot          | 90h | ok  |  7.1 | \nPS1 Fan1 Fail    | A0h | ok  | 10.1 | \nPS1 Fan2 Fail    | A1h | ok  | 10.2 | \nPS2 Fan1 Fail    | A4h | ok  | 10.1 | \nPS2 Fan2 Fail    | A5h | ok  | 10.2 | \nDIMM Thrm Mrgn 1 | B0h | ok  |  8.1 | -50 degrees C\nDIMM Thrm Mrgn 2 | B1h | ok  |  8.2 | -50 degrees C\nDIMM Thrm Mrgn 3 | B2h | ok  |  8.3 | -52 degrees C\nDIMM Thrm Mrgn 4 | B3h | ok  |  8.4 | -52 degrees C\nAuto Shutdown    | B8h | ok  | 21.3 | \nP1 Mem Thrm Trip | C0h | ok  | 32.1 | \nP2 Mem Thrm Trip | C1h | ok  | 32.2 | \nAgg Therm Mgn 1  | C8h | ok  |  7.1 | -33 degrees C\nBB +12.0V        | D0h | ok  |  7.1 | 12.10 Volts\nVoltage Fault    | D1h | ok  |  7.1 | \nBB +3.3V Vbat    | DEh | ok  |  7.1 | 3.01 Volts\nHDD 0 Status     | F0h | ok  |  4.1 | Drive Present\nHDD 1 Status     | F1h | ok  |  4.2 | Drive Present\nHDD 2 Status     | F2h | ok  |  4.3 | \nNM Capabilities  | 1Ah | ok  | 46.1 | \nMTT CPU1         | 34h | ok  |  3.1 | 0 percent\nMTT CPU2         | 35h | ok  |  3.2 | 0 percent",
    "expected-value": 410
  },
  {
    "name": "power-consumption",
    "description": "Retrieves power consumption of the system. Requires elevated privileges.",
    "command": "ipmitool dcmi power reading",
    "regex": "Instantaneous power reading:\\s*(?P<value>\\d+) Watts",
    "unit": "W",
    "example-output": "\n    Instantaneous power reading:                   124 Watts\n    Minimum during sampling period:                110 Watts\n    Maximum during sampling period:                475 Watts\n    Average power reading over sample period:      122 Watts\n    IPMI timestamp:                           Wed Jun 14 10:50:07 2023\n    Sampling period:                          00000005 Seconds.\n    Power reading state is:                   activated\n\n\n",
    "expected-value": 124
  },
  {
    "name": "power-consumption",
    "description": "Retrieves power consumption of the system. It collects the power readings from two power lines. Requires elevated privileges.",
    "command": "ipmitool sensor get 'PS1 Power In' ; ipmitool sensor get 'PS2 Power In'",
    "regex": "Sensor Reading\\s+:\\s*(?P<value>\\d+).*",
    "unit": "W",
    "example-output": "Locating sensor record...\nSensor ID              : PS1 Power In (0x54)\n Entity ID             : 10.1\n Sensor Type (Threshold)  : Other\n Sensor Reading        : 210 (+/- 0) Watts\n Status                : ok\n Lower Non-Recoverable : na\n Lower Critical        : na\n Lower Non-Critical    : na\n Upper Non-Critical    : 2030.000\n Upper Critical        : 2300.000\n Upper Non-Recoverable : na\n Positive Hysteresis   : Unspecified\n Negative Hysteresis   : Unspecified\n Assertion Events      : \n Assertions Enabled    : unc+ ucr+ \n Deassertions Enabled  : unc+ ucr+ \n\nLocating sensor record...\nSensor ID              : PS2 Power In (0x55)\n Entity ID             : 10.2\n Sensor Type (Threshold)  : Other\n Sensor Reading        : 210 (+/- 0) Watts\n Status                : ok\n Lower Non-Recoverable : na\n Lower Critical        : na\n Lower Non-Critical    : na\n Upper Non-Critical    : 2030.000\n Upper Critical        : 2300.000\n Upper Non-Recoverable : na\n Positive Hysteresis   : Unspecified\n Negative Hysteresis   : Unspecified\n Assertion Events      : \n Assertions Enabled    : unc+ ucr+ \n Deassertions Enabled  : unc+ ucr+ \n\n",
    "expected-value": 420
  },
  {
    "name": "used-memory",
    "description": "Retrieves the current memory usage (without swap).",
    "command": "free -m",
    "regex": "Mem: *\\d+ *(?P<value>\\d+).*",
    "unit": "MiB",
    "example-output": "              total        used        free      shared  buff/cache   available\nMem:          63791        1473       58132         508        4185       61156\nSwap:         32223        2277       29946",
    "expected-value": 1473
  },
  {
    "name": "used-swap-memory",
    "description": "Retrieves the current swap memory usage.",
    "command": "free -m",
    "regex": "Swap: *\\d+ *(?P<value>\\d+).*",
    "unit": "MiB",
    "example-output": "              total        used        free      shared  buff/cache   available\nMem:          63791        1473       58132         508        4185       61156\nSwap:         32223        2277       29946",
    "expected-value": 2277
  },
  {
    "name": "gpu-power-consumption",
    "description": "Returns the total power consumption of all GPUs in the system.",
    "command": "nvidia-smi --query-gpu=power.draw --format=csv,noheader,nounits ",
    "regex": "(?P<value>\\d+(.\\d+)?).*",
    "unit": "W",
    "aggregation": "sum",
    "example-output": "105.07\n52.08",
    "expected-value": 157.15
  }
]